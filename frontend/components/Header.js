import Link from "next/link";
import styled from "styled-components";
import NProgress from "nprogress";
import Router from "next/router";
import Nav from "./Nav";
import Cart from "./Cart";
import Search from "./Search";

Router.onRouteChangeStart = () => {
  NProgress.start();
};
Router.onRouteChangeComplete = () => {
  NProgress.done();
};

Router.onRouteChangeError = () => {
  NProgress.done();
};

const Logo = styled.h1`
  font-size: 4rem;
  position: relative;
  z-index: 2;
  a {
    padding: 0.5rem 1rem;
    color: white;
    text-decoration: none;
    svg {
      height: 32px;
      fill: ${props => props.theme.black};
    }
  }
  @media (max-width: 1300px) {
    margin: 0;
    text-align: center;
  }
`;

const StyledHeader = styled.header`
  .bar {
    padding-bottom: 30px;
    padding-top: 30px;
    border-bottom: 1px solid ${props => props.theme.black};
    display: grid;
    grid-template-columns: auto 1fr;
    justify-content: space-between;
    align-items: stretch;
    max-width: ${props => props.theme.maxWidth};
    margin 0 auto;
    @media (max-width: 1300px) {
      grid-template-columns: 1fr;
      justify-content: center;
    }
  }
  .sub-bar {
    max-width: ${props => props.theme.maxWidth};
    margin 0 auto;
    display: grid;
    grid-template-columns: 1fr auto;
    border-bottom: 1px solid ${props => props.theme.lightgrey};
  }
`;

const Header = () => (
  <StyledHeader>
    <div className="bar">
      <Logo>
        <Link href="/">
          <a>
            <svg version="1.1" viewBox="0 0 315.609 46.388">
              <g>
                <path d="M80.678,9.123v28.319h-4.273V9.123H80.678z" />
                <path
                  d="M88.196,19.578h4.145v1.65c1.443-1.431,3.069-2.146,4.879-2.146c2.079,0,3.699,0.654,4.86,1.962
		c1.002,1.113,1.504,2.929,1.504,5.447v10.95h-4.145v-9.978c0-1.761-0.245-2.978-0.734-3.65c-0.477-0.685-1.345-1.026-2.604-1.026
		c-1.37,0-2.342,0.452-2.917,1.356c-0.562,0.894-0.844,2.452-0.844,4.678v8.62h-4.145L88.196,19.578L88.196,19.578z"
                />
                <path
                  d="M114.569,23.429v14.013h-4.145V23.429h-1.467v-3.852h1.467v-6.896c0-2.25,0.391-3.839,1.174-4.769
		c1.076-1.296,2.641-1.944,4.695-1.944c0.734,0,1.657,0.214,2.77,0.642v4.219l-0.422-0.22c-0.893-0.452-1.626-0.679-2.201-0.679
		c-0.733,0-1.229,0.263-1.485,0.788c-0.257,0.514-0.385,1.505-0.385,2.972v5.888h4.494v3.852L114.569,23.429L114.569,23.429z"
                />
                <path
                  d="M123.115,12.149c0-0.721,0.263-1.345,0.789-1.87c0.525-0.526,1.155-0.789,1.889-0.789
		c0.746,0,1.382,0.263,1.908,0.789c0.525,0.514,0.789,1.144,0.789,1.889c0,0.746-0.263,1.382-0.789,1.907
		c-0.514,0.526-1.144,0.789-1.889,0.789c-0.746,0-1.382-0.263-1.908-0.789C123.378,13.55,123.115,12.908,123.115,12.149z
		 M127.866,19.578v17.864h-4.127V19.578H127.866z"
                />
                <path
                  d="M134.595,19.578h4.145v1.65c1.443-1.431,3.069-2.146,4.879-2.146c2.079,0,3.699,0.654,4.86,1.962
		c1.002,1.113,1.504,2.929,1.504,5.447v10.95h-4.145v-9.978c0-1.761-0.245-2.978-0.734-3.65c-0.477-0.685-1.345-1.026-2.604-1.026
		c-1.37,0-2.342,0.452-2.917,1.356c-0.562,0.894-0.844,2.452-0.844,4.678v8.62h-4.145V19.578H134.595z"
                />
                <path
                  d="M156.071,12.149c0-0.721,0.263-1.345,0.789-1.87c0.525-0.526,1.155-0.789,1.889-0.789
		c0.746,0,1.382,0.263,1.908,0.789c0.525,0.514,0.789,1.144,0.789,1.889c0,0.746-0.263,1.382-0.789,1.907
		c-0.514,0.526-1.144,0.789-1.889,0.789c-0.746,0-1.382-0.263-1.908-0.789C156.334,13.55,156.071,12.908,156.071,12.149z
		 M160.822,19.578v17.864h-4.127V19.578H160.822z"
                />
                <path d="M171.807,23.429v14.013h-4.127V23.429h-1.761v-3.852h1.761v-6.548h4.127v6.548h3.209v3.852H171.807z" />
                <path
                  d="M195.924,29.482h-12.802c0.11,1.467,0.587,2.635,1.431,3.503c0.844,0.856,1.926,1.284,3.247,1.284
		c1.027,0,1.877-0.245,2.549-0.733c0.66-0.489,1.412-1.395,2.256-2.715l3.485,1.944c-0.538,0.917-1.106,1.702-1.706,2.356
		s-1.241,1.192-1.926,1.614c-0.685,0.422-1.425,0.73-2.219,0.926c-0.795,0.196-1.657,0.294-2.586,0.294
		c-2.666,0-4.805-0.855-6.419-2.568c-1.614-1.724-2.421-4.01-2.421-6.859c0-2.824,0.782-5.11,2.348-6.859
		c1.577-1.724,3.668-2.586,6.273-2.586c2.628,0,4.707,0.838,6.236,2.513c1.516,1.663,2.274,3.968,2.274,6.914L195.924,29.482z
		 M191.687,26.107c-0.575-2.201-1.962-3.302-4.164-3.302c-0.501,0-0.972,0.077-1.412,0.229c-0.44,0.153-0.841,0.373-1.201,0.66
		c-0.361,0.288-0.669,0.633-0.926,1.036c-0.257,0.404-0.453,0.862-0.587,1.376h8.29L191.687,26.107L191.687,26.107z"
                />
                <path
                  d="M214.409,23.154c0-3.985,1.461-7.409,4.383-10.271c2.91-2.861,6.407-4.292,10.491-4.292
		c4.035,0,7.496,1.442,10.381,4.328c2.898,2.886,4.347,6.353,4.347,10.399c0,4.072-1.455,7.526-4.365,10.363
		c-2.922,2.849-6.45,4.273-10.583,4.273c-3.656,0-6.939-1.266-9.85-3.797C216.011,31.359,214.409,27.691,214.409,23.154z
		 M218.719,23.21c0,3.13,1.051,5.704,3.155,7.722c2.091,2.018,4.505,3.026,7.245,3.026c2.971,0,5.478-1.027,7.52-3.082
		c2.042-2.078,3.063-4.609,3.063-7.593c0-3.021-1.009-5.552-3.026-7.594c-2.005-2.054-4.487-3.081-7.446-3.081
		c-2.947,0-5.436,1.027-7.465,3.081C219.734,17.72,218.719,20.226,218.719,23.21z"
                />
                <path
                  d="M254.227,19.578v10.253c0,2.959,1.167,4.438,3.503,4.438c2.335,0,3.503-1.479,3.503-4.438V19.578h4.127v10.345
		c0,1.431-0.178,2.665-0.532,3.704c-0.342,0.93-0.935,1.768-1.778,2.514c-1.395,1.21-3.167,1.815-5.319,1.815
		c-2.14,0-3.906-0.605-5.301-1.815c-0.855-0.746-1.461-1.584-1.815-2.514c-0.343-0.831-0.514-2.065-0.514-3.704V19.578H254.227z"
                />
                <path d="M276.326,23.429v14.013h-4.127V23.429h-1.761v-3.852h1.761v-6.548h4.127v6.548h3.21v3.852H276.326z" />
                <path
                  d="M288.118,23.429v14.013h-4.146V23.429h-1.467v-3.852h1.467v-6.896c0-2.25,0.392-3.839,1.174-4.769
		c1.076-1.296,2.642-1.944,4.695-1.944c0.734,0,1.657,0.214,2.77,0.642v4.219l-0.421-0.22c-0.894-0.452-1.627-0.679-2.201-0.679
		c-0.734,0-1.229,0.263-1.486,0.788c-0.256,0.514-0.385,1.505-0.385,2.972v5.888h4.493v3.852L288.118,23.429L288.118,23.429z"
                />
                <path
                  d="M296.663,12.149c0-0.721,0.263-1.345,0.789-1.87c0.525-0.526,1.155-0.789,1.889-0.789
		c0.746,0,1.382,0.263,1.908,0.789c0.525,0.514,0.788,1.144,0.788,1.889c0,0.746-0.263,1.382-0.788,1.907
		c-0.514,0.526-1.144,0.789-1.89,0.789s-1.382-0.263-1.907-0.789C296.926,13.55,296.663,12.908,296.663,12.149z M301.414,19.578
		v17.864h-4.127V19.578H301.414z"
                />
                <path d="M312.399,23.429v14.013h-4.127V23.429h-1.761v-3.852h1.761v-6.548h4.127v6.548h3.21v3.852H312.399z" />
              </g>
              <path
                d="M23.194,0C10.384,0,0,10.384,0,23.194s10.384,23.194,23.194,23.194s23.194-10.384,23.194-23.194
	S36.004,0,23.194,0z M35.08,25.401c-0.297,0.719-0.719,1.388-1.289,1.934c-0.57,0.57-1.215,0.992-1.933,1.289
	c-0.694,0.297-1.438,0.421-2.206,0.421s-1.512-0.149-2.206-0.421c-0.719-0.297-1.388-0.719-1.933-1.289l-4.189-4.14l-2.281-2.281
	c-0.62-0.62-1.438-0.942-2.305-0.942s-1.686,0.347-2.281,0.942c-0.62,0.595-0.942,1.413-0.942,2.281s0.347,1.686,0.942,2.281
	c0.62,0.62,1.413,0.942,2.281,0.942s1.686-0.347,2.281-0.942l0.397-0.397l1.859,1.859l-0.397,0.397
	c-0.57,0.57-1.215,0.992-1.933,1.289c-0.694,0.297-1.438,0.421-2.206,0.421s-1.512-0.149-2.206-0.421
	c-0.719-0.297-1.388-0.719-1.933-1.289c-0.57-0.57-0.992-1.215-1.289-1.934c-0.297-0.694-0.421-1.438-0.421-2.206
	s0.149-1.512,0.421-2.206c0.297-0.719,0.719-1.388,1.289-1.933c0.57-0.57,1.215-0.992,1.933-1.289
	c0.694-0.297,1.438-0.421,2.206-0.421c0.768,0,1.512,0.149,2.206,0.421c0.719,0.297,1.388,0.719,1.933,1.289l5.528,5.503
	l0.917,0.917c0.62,0.62,1.413,0.942,2.281,0.942s1.686-0.347,2.281-0.942c0.62-0.62,0.942-1.413,0.942-2.281
	s-0.347-1.686-0.942-2.281c-0.595-0.62-1.388-0.942-2.256-0.942s-1.686,0.347-2.281,0.942l-0.473,0.471l-1.859-1.859l0.471-0.471
	c0.57-0.57,1.215-0.992,1.934-1.289c0.694-0.297,1.438-0.421,2.206-0.421s1.512,0.149,2.206,0.421
	c0.719,0.297,1.388,0.719,1.933,1.289c0.57,0.57,0.992,1.215,1.289,1.933c0.297,0.694,0.446,1.438,0.446,2.206
	S35.353,24.707,35.08,25.401z"
              />
            </svg>
          </a>
        </Link>
      </Logo>
      <Nav />
    </div>
    <div className="sub-bar">
      <Search />
    </div>
    <Cart />
  </StyledHeader>
);

export default Header;
